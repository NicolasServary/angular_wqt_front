import{a as P}from"./chunk-5RFGI2TY.js";import{Ja as d,Ka as l,La as x,Ma as k,Ra as n,Sa as i,Ta as u,Wa as _,X as g,Xa as f,Y as m,ab as p,bb as a,cb as h,db as v,eb as M,qa as c,ub as E,va as b,za as C}from"./chunk-J2IMAIQP.js";var y=(o,e)=>e.id;function w(o,e){o&1&&(n(0,"div",1)(1,"div",7)(2,"div",8),g(),n(3,"svg",9),u(4,"path",10)(5,"line",11)(6,"line",12),i()(),m(),n(7,"div",13)(8,"h4",14),a(9,"\xC9quipement incomplet"),i(),n(10,"p",15),a(11,"Pour avoir acc\xE8s \xE0 la pr\xE9diction, veuillez \xE9quiper toutes vos caisses."),i()()()())}function S(o,e){o&1&&(n(0,"div",1)(1,"div",7)(2,"div",8),g(),n(3,"svg",9),u(4,"path",10)(5,"line",11)(6,"line",12),i()(),m(),n(7,"div",16)(8,"div")(9,"h4",14),a(10,"Nombre optimal de caisse dans 15min"),i(),n(11,"p",15),a(12,"Pour avoir acc\xE8s \xE0 la pr\xE9diction, veuillez \xE9quiper toutes vos caisses."),i()(),n(13,"div",17)(14,"h2",18),a(15,"5"),i(),n(16,"p",19),a(17,"caisses recommand\xE9es"),i()()()()())}function I(o,e){o&1&&(n(0,"div",24)(1,"div",27),a(2,"CRITIQUE"),i()())}function T(o,e){o&1&&(n(0,"div",24)(1,"div",28),a(2,"URGENT"),i()())}function q(o,e){if(o&1&&(n(0,"div",26)(1,"div",29),a(2),i(),n(3,"div",30),a(4),i()()),o&2){let t=f().$implicit;c(2),h(t.waitingCount),c(2),h(t.waitingCount===1?"personne":"personnes")}}function z(o,e){if(o&1&&(n(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23),a(4),i()(),d(5,I,3,0,"div",24)(6,T,3,0,"div",24),i(),n(7,"div",25),d(8,q,5,2,"div",26),i()()),o&2){let t=e.$implicit,r=f();p(r.getPriorityClass(t)),c(4),v("Caisse #",t.id),c(),l(t.waitingCount>=5?5:t.waitingCount===4?6:-1),c(3),l(t.status==="open"?8:-1)}}var O=class o{constructor(e){this.checkoutService=e;this.checkouts=this.checkoutService.getCheckouts(),this.getStatusClass=this.checkoutService.getStatusClass.bind(this.checkoutService),this.getWaitingText=this.checkoutService.getWaitingText.bind(this.checkoutService)}checkouts;getStatusClass;getWaitingText;sidebarCollapsed=!1;isCollapsed=!1;alertInterval;alertActive=!1;criticalCheckouts=[];totalCheckouts=15;ngOnInit(){this.startAlertMonitoring()}ngOnDestroy(){this.alertInterval&&clearInterval(this.alertInterval)}startAlertMonitoring(){this.alertInterval=window.setInterval(()=>{this.checkForCriticalSituations()},2e3)}checkForCriticalSituations(){this.checkouts().filter(t=>t.status==="open").length<this.totalCheckouts?this.alertActive=!0:this.alertActive=!1}triggerAlert(){this.alertActive=!0}getAlertClass(){return this.alertActive?"alert-active":""}isAllCheckoutsEquipped(){return this.checkouts().filter(t=>t.status==="open").length>=this.totalCheckouts}onCheckoutBadgeClick(){let e=prompt(`Entrez le nombre total de caisses (actuellement: ${this.totalCheckouts}):`,this.totalCheckouts.toString());if(e!==null){let t=parseInt(e,10);!isNaN(t)&&t>0&&t<=50?this.totalCheckouts=t:alert("Veuillez entrer un nombre valide entre 1 et 50")}}getTotalWaiting(){return this.checkouts().reduce((e,t)=>e+t.waitingCount,0)}getOpenCheckouts(){return this.checkouts().filter(e=>e.status==="open").length}getActiveCheckouts(){return this.checkouts().filter(e=>e.status==="open").length}getAverageWaitTime(){let e=this.checkouts().filter(r=>r.status==="open"&&r.waitingCount>0);if(e.length===0)return 0;let t=e.reduce((r,s)=>r+s.estimatedWait,0);return Math.round(t/e.length*10)/10}getSuccessRate(){return 95}getPriorityClass(e){return e.waitingCount>=5?"critical":e.waitingCount===4?"urgent":"normal"}getSortedCheckouts(){return this.checkouts().filter(e=>e.status==="open").sort((e,t)=>{let r=this.getPriorityLevel(e),s=this.getPriorityLevel(t);return r!==s?s-r:t.waitingCount-e.waitingCount})}getPriorityLevel(e){return e.waitingCount>=5?3:e.waitingCount===4?2:1}static \u0275fac=function(t){return new(t||o)(b(P))};static \u0275cmp=C({type:o,selectors:[["app-grid"]],decls:12,vars:5,consts:[[1,"grid-interface"],[1,"notification-container"],[1,"queue-section"],[1,"section-header"],[1,"queue-badge",3,"click"],[1,"checkout-grid"],[1,"checkout-card",3,"class"],[1,"notification","notification-warning"],[1,"notification-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-content-2"],[1,"optimal-checkout-info"],[1,"optimal-checkouts"],[1,"optimal-label"],[1,"checkout-card"],[1,"card-header"],[1,"header-top"],[1,"checkout-number"],[1,"header-badge"],[1,"card-body"],[1,"queue-display"],[1,"priority-badge","critical"],[1,"priority-badge","urgent"],[1,"queue-number"],[1,"queue-label"]],template:function(t,r){t&1&&(n(0,"div",0),d(1,w,12,0,"div",1)(2,S,18,0,"div",1),n(3,"div",2)(4,"div",3)(5,"h2"),a(6,"Vue en direct"),i(),n(7,"div",4),_("click",function(){return r.onCheckoutBadgeClick()}),a(8),i()(),n(9,"div",5),x(10,z,9,5,"div",6,y),i()()()),t&2&&(p(r.getAlertClass()),c(),l(r.isAllCheckoutsEquipped()?2:1),c(7),M("",r.getSortedCheckouts().length," caisses \xE9quip\xE9es / ",r.totalCheckouts),c(2),k(r.getSortedCheckouts()))},dependencies:[E],styles:[".grid-interface[_ngcontent-%COMP%]{width:100%;padding:0;background:#fafafa;min-height:100vh}.notification-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.notification[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem 1.5rem;display:flex;align-items:flex-start;gap:1rem;box-shadow:0 1px 3px #00000014;border-left:4px solid transparent;transition:all .2s ease}.notification-critical[_ngcontent-%COMP%]{border-left-color:#ef4444;background:linear-gradient(90deg,#ef444408,#fff)}.notification-warning[_ngcontent-%COMP%]{border-left-color:#f59e0b;background:linear-gradient(90deg,#f59e0b08,#fff)}.notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.notification-critical[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.notification-warning[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.notification-content[_ngcontent-%COMP%]{flex:1}.notification-content-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:15px;grid-row-gap:13px}.notification-title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:#111827;margin:0 0 .375rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.notification-message[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0;line-height:1.5;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.notification-close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;color:#9ca3af;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}.notification-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.header-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;margin-bottom:2.5rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.75rem 1.5rem;text-align:center;box-shadow:0 1px 3px #0000000a;border:1px solid #f0f0f0;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014}.stat-number[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:600;color:#1a1a1a;margin-bottom:.4rem;line-height:1}.stat-number.green[_ngcontent-%COMP%]{color:#10b981}.stat-number.blue[_ngcontent-%COMP%]{color:#3b82f6}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:400;letter-spacing:-.01em}.queue-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:0;box-shadow:0 1px 3px #0000000a;border:1px solid #f0f0f0;overflow:hidden}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.75rem;border-bottom:1px solid #f8f9fa;background:#fdfdfd}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:500;color:#1a1a1a;margin:0;letter-spacing:-.02em}.queue-badge[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;padding:.375rem .875rem;border-radius:24px;font-size:.8125rem;font-weight:500;letter-spacing:-.01em;cursor:pointer;transition:all .2s ease}.queue-badge[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.05)}.checkout-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem;padding:1.75rem}.checkout-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;transition:all .3s ease;border:1px solid #e5e7eb;position:relative;box-shadow:0 1px 2px #0000000a;min-height:180px;display:flex;flex-direction:column}.checkout-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014;border-color:#d1d5db}.checkout-card.normal[_ngcontent-%COMP%]{border-color:#e5e7eb;background:#f9fafb}.checkout-card.urgent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fb923c14,#fdba741f);border-color:#fb923c}.checkout-card.critical[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef444414,#fca5a51f);border-color:#ef4444}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:1.25rem 1.5rem .5rem;gap:.5rem}.header-top[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start}.header-badge[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end}.checkout-number[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.priority-badge[_ngcontent-%COMP%]{font-size:.5625rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;padding:.25rem .5rem;border-radius:6px;white-space:nowrap}.priority-badge.urgent[_ngcontent-%COMP%]{background:#fb923c;color:#fff}.priority-badge.critical[_ngcontent-%COMP%]{background:#ef4444;color:#fff;animation:none}.card-body[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.25rem;text-align:center;flex:1;display:flex;align-items:center;justify-content:center}.queue-display[_ngcontent-%COMP%]{margin-bottom:0}.queue-number[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;line-height:1;margin-bottom:.5rem;color:#1f2937;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.checkout-card.urgent[_ngcontent-%COMP%]   .queue-number[_ngcontent-%COMP%]{color:#dc2626}.checkout-card.critical[_ngcontent-%COMP%]   .queue-number[_ngcontent-%COMP%]{color:#991b1b}.queue-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500;text-transform:lowercase;letter-spacing:.01em;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.wait-display[_ngcontent-%COMP%]{background:#ffffffb3;padding:.375rem .75rem;border-radius:12px;display:inline-block}.wait-time[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#4b5563}.card-footer[_ngcontent-%COMP%]{padding:.75rem 1.25rem 1rem}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}.btn-accept[_ngcontent-%COMP%], .btn-decline[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.5rem;border:none;border-radius:10px;cursor:pointer;transition:all .2s ease;font-size:.8125rem;font-weight:500}.btn-accept[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-accept[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-1px)}.btn-decline[_ngcontent-%COMP%]{background:#fff;color:#6b7280;border:1px solid #e5e7eb}.btn-decline[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#374151;transform:translateY(-1px)}@media (max-width: 768px){.grid-interface[_ngcontent-%COMP%]{padding:1rem}.header-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.checkout-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;padding:1rem}.section-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;flex-direction:column;gap:.75rem;align-items:stretch}}"]})};export{O as Grid};
