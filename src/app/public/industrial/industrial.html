<div class="industrial-layout" [class.collapsed]="isCollapsed">
  <!-- Industrial Tech Sidebar -->
  <nav class="industrial-sidebar" [class.collapsed]="isCollapsed">
    <div class="sidebar-header">
      <button class="sidebar-toggle" (click)="isCollapsed = !isCollapsed">
        <div class="toggle-lines">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </button>

      @if (!isCollapsed) {
        <div class="brand-section">
          <div class="brand-terminal">
            <div class="terminal-header">
              <div class="terminal-controls">
                <span class="control-dot red"></span>
                <span class="control-dot yellow"></span>
                <span class="control-dot green"></span>
              </div>
            </div>
            <div class="terminal-content">
              <div class="terminal-line">
                <span class="prompt">$</span>
                <span class="command">WQT-SYSTEM</span>
              </div>
              <div class="terminal-line">
                <span class="prompt">></span>
                <span class="output">INDUSTRIAL.MODE</span>
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="sidebar-content">
      <div class="nav-section">
        @if (!isCollapsed) {
          <div class="section-header">
            <span class="section-bracket">[</span>
            <span class="section-title">NAVIGATION</span>
            <span class="section-bracket">]</span>
          </div>
        }

        <div class="nav-grid">
          <a routerLink="/public/home" class="nav-button" data-code="01">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">CLASSIQUE</span>
              }
            </div>
          </a>

          <a routerLink="/public/grid" class="nav-button" data-code="02">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">GRID</span>
              }
            </div>
          </a>

          <a routerLink="/public/card" class="nav-button" data-code="03">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H5v-2h9v2zm5-4H5v-2h14v2zm0-4H5V7h14v2z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">CARDS</span>
              }
            </div>
          </a>

          <a routerLink="/public/minimal" class="nav-button" data-code="04">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">MINIMAL</span>
              }
            </div>
          </a>

          <a routerLink="/public/modern" class="nav-button" data-code="05">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 9 5.16-.74 9-4.45 9-10V7l-10-5z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">MODERN</span>
              }
            </div>
          </a>

          <a routerLink="/public/compact" class="nav-button" data-code="06">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 11H7v8h2v-8zm4-4H11v12h2V7zm4-4H15v16h2V3z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">COMPACT</span>
              }
            </div>
          </a>

          <a routerLink="/public/elegant" class="nav-button" data-code="07">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9l-5 4.87 1.18 6.88L12 17.77l-6.18 2.98L7 14.87 2 10l6.91-1.74L12 2z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">ELEGANT</span>
              }
            </div>
          </a>

          <div class="nav-button active" data-code="08">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.5 8A1.5 1.5 0 0 1 10 6.5 1.5 1.5 0 0 1 8.5 8zm7 0A1.5 1.5 0 0 1 14 6.5 1.5 1.5 0 0 1 15.5 8zM12 17.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">INDUSTRIAL</span>
                <div class="active-led"></div>
              }
            </div>
          </div>

          <a routerLink="/public/zen" class="nav-button" data-code="09">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">ZEN</span>
              }
            </div>
          </a>

          <a routerLink="/public/dashboard" class="nav-button" data-code="10">
            <div class="button-frame">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="button-text">DASHBOARD</span>
              }
            </div>
          </a>
        </div>
      </div>

      @if (!isCollapsed) {
        <div class="system-info">
          <div class="section-header">
            <span class="section-bracket">[</span>
            <span class="section-title">SYSTEM</span>
            <span class="section-bracket">]</span>
          </div>
          <div class="info-display">
            <div class="info-row">
              <span class="info-label">STATUS:</span>
              <span class="info-value operational">OPERATIONAL</span>
            </div>
            <div class="info-row">
              <span class="info-label">UPTIME:</span>
              <span class="info-value">99.7%</span>
            </div>
            <div class="info-row">
              <span class="info-label">LOAD:</span>
              <span class="info-value">47%</span>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="sidebar-footer">
      @if (!isCollapsed) {
        <div class="footer-display">
          <div class="power-indicator">
            <div class="power-led"></div>
            <span class="power-text">PWR</span>
          </div>
          <div class="network-indicator">
            <div class="network-bars">
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
            </div>
            <span class="network-text">NET</span>
          </div>
        </div>
      } @else {
        <div class="power-led"></div>
      }
    </div>
  </nav>

  <!-- Industrial Main Content -->
  <main class="industrial-main">
    <!-- Control Panel Header -->
    <header class="control-panel">
      <div class="panel-frame">
        <div class="panel-left">
          <div class="system-title">
            <span class="title-prefix">&gt;&gt;</span>
            <h1 class="title-text">QUEUE CONTROL SYSTEM</h1>
            <span class="title-suffix">v2.1</span>
          </div>
          <div class="status-line">
            <span class="status-indicator online"></span>
            <span class="status-text">SYSTEM ONLINE</span>
            <span class="separator">|</span>
            <span class="timestamp">{{ getCurrentDate() }}</span>
          </div>
        </div>

        <div class="panel-right">
          <div class="control-cluster">
            <button class="control-switch">
              <div class="switch-body">
                <div class="switch-handle"></div>
              </div>
              <span class="switch-label">AUTO</span>
            </button>
            <button class="control-button emergency">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
              </svg>
              <span>ALERT</span>
            </button>
            <button class="control-button primary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
              </svg>
              <span>SYNC</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Industrial Content -->
    <div class="main-workspace">
      <!-- Monitoring Grid -->
      <section class="monitoring-section">
        <div class="section-frame">
          <div class="frame-header">
            <span class="frame-title">[ MONITORING GRID ]</span>
            <div class="frame-indicators">
              <div class="indicator active"></div>
              <div class="indicator active"></div>
              <div class="indicator"></div>
            </div>
          </div>

          <div class="monitoring-grid">
            <div class="monitor-panel stations">
              <div class="panel-header">
                <span class="panel-code">STA</span>
                <span class="panel-name">STATIONS</span>
              </div>
              <div class="panel-display">
                <div class="display-value">{{ getOpenCheckouts() }}</div>
                <div class="display-unit">ACTIVE</div>
              </div>
              <div class="panel-graph">
                <div class="graph-bars">
                  <div class="bar" style="height: 60%"></div>
                  <div class="bar" style="height: 80%"></div>
                  <div class="bar" style="height: 45%"></div>
                  <div class="bar" style="height: 90%"></div>
                  <div class="bar" style="height: 70%"></div>
                </div>
              </div>
            </div>

            <div class="monitor-panel processing">
              <div class="panel-header">
                <span class="panel-code">PRC</span>
                <span class="panel-name">PROCESSING</span>
              </div>
              <div class="panel-display">
                <div class="display-value">{{ getAverageWaitTime() }}</div>
                <div class="display-unit">MIN AVG</div>
              </div>
              <div class="panel-meter">
                <div class="meter-track">
                  <div class="meter-fill" [style.width.%]="getAverageWaitTime() * 10"></div>
                </div>
                <div class="meter-scale">
                  <span>0</span>
                  <span>5</span>
                  <span>10</span>
                </div>
              </div>
            </div>

            <div class="monitor-panel efficiency">
              <div class="panel-header">
                <span class="panel-code">EFF</span>
                <span class="panel-name">EFFICIENCY</span>
              </div>
              <div class="panel-display">
                <div class="display-value">{{ getSuccessRate() }}</div>
                <div class="display-unit">% RATE</div>
              </div>
              <div class="panel-status">
                <div class="status-grid">
                  <div class="status-dot active"></div>
                  <div class="status-dot active"></div>
                  <div class="status-dot active"></div>
                  <div class="status-dot"></div>
                </div>
                <span class="status-label">OPTIMAL</span>
              </div>
            </div>

            <div class="monitor-panel queue">
              <div class="panel-header">
                <span class="panel-code">QUE</span>
                <span class="panel-name">QUEUE</span>
              </div>
              <div class="panel-display">
                <div class="display-value">{{ getTotalWaiting() }}</div>
                <div class="display-unit">TOTAL</div>
              </div>
              <div class="panel-waveform">
                <div class="waveform">
                  <div class="wave-line"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Queue Processing Unit -->
      <section class="processing-section">
        <div class="section-frame">
          <div class="frame-header">
            <span class="frame-title">[ QUEUE PROCESSING UNIT ]</span>
            <div class="frame-status">
              <span class="status-count">{{ getSortedCheckouts().length }}</span>
              <span class="status-label">ACTIVE PROCESSES</span>
            </div>
          </div>

          <div class="processing-grid">
            @for (checkout of getSortedCheckouts(); track checkout.id) {
              <div class="process-unit" [class]="getPriorityClass(checkout)">
                <div class="unit-header">
                  <div class="unit-id">
                    <span class="id-prefix">U-</span>
                    <span class="id-number">{{ checkout.id.toString().padStart(3, '0') }}</span>
                  </div>
                  <div class="unit-status">
                    @switch (getPriorityClass(checkout)) {
                      @case ('critical') {
                        <div class="status-badge critical">
                          <div class="badge-led"></div>
                          <span>CRITICAL</span>
                        </div>
                      }
                      @case ('urgent') {
                        <div class="status-badge urgent">
                          <div class="badge-led"></div>
                          <span>URGENT</span>
                        </div>
                      }
                      @default {
                        <div class="status-badge normal">
                          <div class="badge-led"></div>
                          <span>NORMAL</span>
                        </div>
                      }
                    }
                  </div>
                </div>

                <div class="unit-metrics">
                  <div class="metric-display">
                    <div class="metric-row">
                      <span class="metric-label">QUEUE:</span>
                      <span class="metric-value">{{ checkout.waitingCount }}</span>
                    </div>
                    <div class="metric-row">
                      <span class="metric-label">ETA:</span>
                      <span class="metric-value">{{ checkout.estimatedWait }}MIN</span>
                    </div>
                  </div>

                  <div class="unit-controls">
                    <button class="unit-button accept">
                      <div class="button-led"></div>
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"/>
                      </svg>
                      <span>EXEC</span>
                    </button>
                    <button class="unit-button decline">
                      <div class="button-led"></div>
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/>
                      </svg>
                      <span>TERM</span>
                    </button>
                    <button class="unit-button info">
                      <div class="button-led"></div>
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                      </svg>
                      <span>INFO</span>
                    </button>
                  </div>
                </div>
              </div>
            }

            @if (getSortedCheckouts().length === 0) {
              <div class="idle-state">
                <div class="idle-display">
                  <div class="idle-screen">
                    <div class="screen-lines">
                      <div class="scan-line"></div>
                    </div>
                    <div class="idle-text">
                      <span class="idle-status">[ ALL SYSTEMS IDLE ]</span>
                      <span class="idle-message">AWAITING QUEUE OPERATIONS</span>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      </section>
    </div>
  </main>
</div>