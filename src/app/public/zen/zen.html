<div class="zen-layout" [class.collapsed]="isCollapsed">
  <!-- Zen Minimalist Sidebar -->
  <nav class="zen-sidebar" [class.collapsed]="isCollapsed">
    <div class="sidebar-header">
      <button class="sidebar-toggle" (click)="isCollapsed = !isCollapsed">
        <div class="toggle-circle">
          <div class="toggle-inner"></div>
        </div>
      </button>

      @if (!isCollapsed) {
        <div class="brand-section">
          <div class="zen-logo">
            <div class="logo-circle">
              <div class="logo-inner">W</div>
            </div>
          </div>
          <div class="brand-text">
            <h1 class="brand-title">WQT Zen</h1>
            <p class="brand-essence">Mindful Monitoring</p>
          </div>
        </div>
      }
    </div>

    <div class="sidebar-content">
      <div class="nav-section">
        @if (!isCollapsed) {
          <div class="section-divider"></div>
          <span class="section-label">Navigate</span>
        }

        <div class="nav-flow">
          <a routerLink="/public/home" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Classique</span>
              }
            </div>
          </a>

          <a routerLink="/public/grid" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Grid</span>
              }
            </div>
          </a>

          <a routerLink="/public/card" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H5v-2h9v2zm5-4H5v-2h14v2zm0-4H5V7h14v2z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Cards</span>
              }
            </div>
          </a>

          <a routerLink="/public/minimal" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Minimal</span>
              }
            </div>
          </a>

          <a routerLink="/public/modern" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 9 5.16-.74 9-4.45 9-10V7l-10-5z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Modern</span>
              }
            </div>
          </a>

          <a routerLink="/public/compact" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 11H7v8h2v-8zm4-4H11v12h2V7zm4-4H15v16h2V3z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Compact</span>
              }
            </div>
          </a>

          <a routerLink="/public/elegant" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9l-5 4.87 1.18 6.88L12 17.77l-6.18 2.98L7 14.87 2 10l6.91-1.74L12 2z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Elegant</span>
              }
            </div>
          </a>

          <a routerLink="/public/industrial" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.5 8A1.5 1.5 0 0 1 10 6.5 1.5 1.5 0 0 1 8.5 8zm7 0A1.5 1.5 0 0 1 14 6.5 1.5 1.5 0 0 1 15.5 8zM12 17.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Industrial</span>
              }
            </div>
          </a>

          <div class="nav-stone active">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Zen</span>
                <div class="harmony-dot"></div>
              }
            </div>
          </div>

          <a routerLink="/public/dashboard" class="nav-stone">
            <div class="stone-surface">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
              </svg>
              @if (!isCollapsed) {
                <span class="stone-text">Dashboard</span>
              }
            </div>
          </a>
        </div>
      </div>

      @if (!isCollapsed) {
        <div class="balance-section">
          <div class="section-divider"></div>
          <span class="section-label">Balance</span>
          <div class="balance-display">
            <div class="balance-circle">
              <div class="circle-progress">
                <svg width="60" height="60" viewBox="0 0 60 60">
                  <circle cx="30" cy="30" r="28" stroke="rgba(139, 195, 74, 0.2)" stroke-width="2" fill="none"/>
                  <circle cx="30" cy="30" r="28" stroke="#8bc34a" stroke-width="2" fill="none"
                          stroke-dasharray="175.93" stroke-dashoffset="50" stroke-linecap="round"/>
                </svg>
                <div class="circle-center">
                  <span class="balance-value">{{ getSuccessRate() }}</span>
                  <span class="balance-unit">%</span>
                </div>
              </div>
            </div>
            <span class="balance-label">Harmony</span>
          </div>
        </div>
      }
    </div>

    <div class="sidebar-footer">
      @if (!isCollapsed) {
        <div class="tranquility-indicator">
          <div class="ripple-container">
            <div class="ripple"></div>
            <div class="ripple"></div>
            <div class="ripple"></div>
          </div>
          <span class="tranquility-text">Tranquil State</span>
        </div>
      } @else {
        <div class="ripple-container">
          <div class="ripple"></div>
        </div>
      }
    </div>
  </nav>

  <!-- Zen Main Content -->
  <main class="zen-main">
    <!-- Mindful Header -->
    <header class="mindful-header">
      <div class="header-flow">
        <div class="consciousness-section">
          <div class="awareness-title">
            <h1 class="title-meditation">Queue Consciousness</h1>
            <p class="title-mantra">Mindful flow management</p>
          </div>
          <div class="present-moment">
            <div class="moment-display">
              <span class="moment-label">Present Moment</span>
              <span class="moment-time">{{ getCurrentTime() }}</span>
            </div>
          </div>
        </div>

        <div class="serenity-controls">
          <button class="zen-action breathe">
            <div class="action-ripple"></div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
            <span>Refresh</span>
          </button>
          <button class="zen-action meditate">
            <div class="action-ripple"></div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
            <span>Focus</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Zen Content Garden -->
    <div class="content-garden">
      <!-- Awareness Stones -->
      <section class="awareness-section">
        <div class="section-breath">
          <h2 class="breath-title">Current Awareness</h2>
          <div class="breath-line"></div>
        </div>

        <div class="stones-garden">
          <div class="awareness-stone stations">
            <div class="stone-center">
              <div class="stone-value">{{ getOpenCheckouts() }}</div>
              <div class="stone-essence">Active Flows</div>
            </div>
            <div class="stone-aura"></div>
          </div>

          <div class="awareness-stone time">
            <div class="stone-center">
              <div class="stone-value">{{ getAverageWaitTime() }}<span class="value-whisper">min</span></div>
              <div class="stone-essence">Average Breath</div>
            </div>
            <div class="stone-aura"></div>
          </div>

          <div class="awareness-stone harmony">
            <div class="stone-center">
              <div class="stone-value">{{ getSuccessRate() }}<span class="value-whisper">%</span></div>
              <div class="stone-essence">Flow Harmony</div>
            </div>
            <div class="stone-aura"></div>
          </div>

          <div class="awareness-stone presence">
            <div class="stone-center">
              <div class="stone-value">{{ getTotalWaiting() }}</div>
              <div class="stone-essence">Present Souls</div>
            </div>
            <div class="stone-aura"></div>
          </div>
        </div>
      </section>

      <!-- Flow Garden -->
      <section class="flow-section">
        <div class="section-breath">
          <h2 class="breath-title">Flow Garden</h2>
          <div class="breath-count">{{ getSortedCheckouts().length }} flowing streams</div>
        </div>

        <div class="flow-streams">
          @for (checkout of getSortedCheckouts(); track checkout.id) {
            <div class="flow-stream" [class]="getPriorityClass(checkout)">
              <div class="stream-surface">
                <div class="stream-header">
                  <div class="stream-identity">
                    <div class="identity-circle">
                      <span class="identity-number">{{ checkout.id }}</span>
                    </div>
                    <span class="identity-name">Stream {{ checkout.id }}</span>
                  </div>

                  <div class="stream-state">
                    @switch (getPriorityClass(checkout)) {
                      @case ('critical') {
                        <div class="state-indicator turbulent">
                          <div class="state-pulse"></div>
                          <span class="state-label">Turbulent</span>
                        </div>
                      }
                      @case ('urgent') {
                        <div class="state-indicator flowing">
                          <div class="state-pulse"></div>
                          <span class="state-label">Flowing</span>
                        </div>
                      }
                      @default {
                        <div class="state-indicator calm">
                          <div class="state-pulse"></div>
                          <span class="state-label">Calm</span>
                        </div>
                      }
                    }
                  </div>
                </div>

                <div class="stream-metrics">
                  <div class="metric-pair">
                    <div class="metric-stone">
                      <span class="metric-whisper">Waiting Souls</span>
                      <span class="metric-presence">{{ checkout.waitingCount }}</span>
                    </div>
                    <div class="metric-stone">
                      <span class="metric-whisper">Flow Time</span>
                      <span class="metric-presence">{{ checkout.estimatedWait }} breaths</span>
                    </div>
                  </div>

                  <div class="stream-actions">
                    <button class="zen-button accept">
                      <div class="button-essence"></div>
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"/>
                      </svg>
                      <span>Accept</span>
                    </button>
                    <button class="zen-button decline">
                      <div class="button-essence"></div>
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/>
                      </svg>
                      <span>Release</span>
                    </button>
                    <button class="zen-button reflect">
                      <div class="button-essence"></div>
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                      </svg>
                      <span>Reflect</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          }

          @if (getSortedCheckouts().length === 0) {
            <div class="emptiness-state">
              <div class="void-container">
                <div class="void-circle">
                  <div class="void-ripples">
                    <div class="void-ripple"></div>
                    <div class="void-ripple"></div>
                    <div class="void-ripple"></div>
                  </div>
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                  </svg>
                </div>
                <h3 class="void-title">Perfect Stillness</h3>
                <p class="void-wisdom">In emptiness, all potential flows await</p>
              </div>
            </div>
          }
        </div>
      </section>
    </div>
  </main>
</div>